{% extends "base.html" %}
{% block title %}Coding for Fun / 討論區{% endblock %}
{% block css %}
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<link rel="stylesheet" href="/html/css/question.css">
<style>
	div.bbackground {
		display: none;
		position: fixed;
		background-color: rgba(0,0,0,0.85);
		top: 0px;
		left: 0px;
		width: 100%;
		height: 100%;
	}

	iframe#video {
		transform: translate(0, 50px);
	}
</style>
{% endblock %}
{% block content %}
<div class="container">
	<div class="row">
		<div class="col-sm-12"><!--  style="background-color:red"> -->
		<br><br>
			<center>
				<ul class="nav nav-pills" style="width:90%">
					<li role="presentation" id="all" class="label-button active"><a class="text-primary" onclick="getallquestion('all', null)"> 所有問題 </a></li>
					<li role="presentation" id="writer" class="label-button"><a class="text-primary" onclick="getallquestion('writer', getCookie('id'))"> 我的問題 </a></li>
					<li role="presentation" id="solved" class="label-button"><a class="text-primary" onclick="getallquestion('solved', 'True')"> 已解問題 </a></li>
					<li role="presentation" id="unsolved" class="label-button"><a class="text-primary" onclick="getallquestion('solved', 'False')"> 未解的問題 </a></li>
					<li role="presentation" id="answer" class="label-button"><a class="text-primary" onclick="getallquestion('answer', getCookie('id'))"> 回答過的問題 </a></li>
				</ul><br>
				<div id="cards">
					<span style="font-size:48px;color:#aaa"> 請稍等</span>
				</div>
			</center>
		</div>
	</div>
</div>

<div class="askframe">
	<img width="64" onclick="openask()" onmouseover="show('askquestion-frame')" onmouseout="hide('askquestion-frame')" src="/html/images/writequestion.png">
	<img style="display: inline-block;" width="64" onclick="show('bbackground');playVideo()" onmouseover="show('howto-frame')" onmouseout="hide('howto-frame')" src="/html/images/howto.png">
</div>
<div id="howto-frame" class="toggle-label" style="left: 170px;">
	示範
</div>
<div id="askquestion-frame" class="toggle-label">
	問問題
</div>
<div id="notlogin-frame" class="toggle-label" style="bottom: 90px;color:red;font-weight: bold;">
	請先登錄
</div>
{% endblock %}
{% block bcontent %}
<div id="question-frame" class="loginsignup-frame">
	<div class="loginsignup-frame-inside">
		<a id="closeloginframe" onclick="hide('question-frame');" style="">X</a><br>
		<div class="frame-content" style="padding-top: 0%;padding-left: 10%">
			<span id="title"></span><br>
			<span id="question-writer"></span>
			<span id="type" class="type"></span>
			<span id="create_at"></span>
			<button class="btn btn-warning btn-xs" id="closequestion"> 關閉問題 </button>
			<hr>
			<span id="content"></span>
			<br>
			<div id="files">
				沒有檔案
			</div>
			<br>
			<div id="answer-div" style="display: none;">
				<br>
				<textarea id="answer-content" placeholder="請在這裡回答問題"></textarea><br>
				<form method="post" enctype="multipart/form-data" id="answerform">
					<div class="btn-group btn-group-sm" role="group" aria-label="...">
						<input accept=".py,.sb,.sb2,.png,.jpg" name="file1" id="f1-a" type="file" class="btn btn-default" />
						<input accept=".py,.sb,.sb2,.png,.jpg" name="file2" id="f2-a" type="file" class="btn btn-default" />
						<input accept=".py,.sb,.sb2,.png,.jpg" name="file3" id="f3-a" type="file" class="btn btn-default" />
					</div>
					<br><br>
					<input type="text" readonly=1 name="answerkey" id="answerkey" style="display:none;">
				</form>
				<button id="answer-submit" class="btn btn-primary" onclick="answer()"> 回答 </button>
			</div>
			<div id="answers"></div>
			<br>
		</div>
	</div>
</div>

<div id="ask-frame" class="loginsignup-frame">
	<div class="loginsignup-frame-inside">
		<a id="closeloginframe" onclick="hide('ask-frame');" style="">X</a><br>
		<div class="frame-content" style="padding-top: 5%;">
			<center>
				<form method="post" enctype="multipart/form-data" id="questionform">
					<input placeholder="標題" id="ask-title" type="text"><br><br>
					<textarea id="ask-content" cols="30" rows="10"></textarea>
					<div class="dropdown" style="width: 30%">
						<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:90%">
							問題種類 <span class="caret">
						</button>
						<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
							<li><a onclick="changetype(0)">Scratch</a></li>
							<li><a onclick="changetype(1)">Python</a></li>
							<li><a onclick="changetype(2)">其他</a></li>
						</ul>
					</div>
					<br>
					<div class="btn-group-vertical" role="group" aria-label="...">
						<input accept=".py,.sb,.sb2,.png,.jpg" name="file1" id="f1-q" type="file" class="btn btn-default" />
						<input accept=".py,.sb,.sb2,.png,.jpg" name="file2" id="f2-q" type="file" class="btn btn-default" />
						<input accept=".py,.sb,.sb2,.png,.jpg" name="file3" id="f3-q" type="file" class="btn btn-default" />
					</div>
					<input type="text" readonly=1 name="questionkey" id="questionkey" style="display:none;">

					<br><br>
				</form>
				<button onclick="ask()" id="submit">發問</button><br><br><br>
			</center>
		</div>
	</div>
</div>

<div class="bbackground" id="bbackground">
	<div style="color:white;font-size:36px;cursor: pointer;" onclick="stopVideo();hide('bbackground')">X</div>
	<center>
		<div id="player"></div>
		<!-- <iframe width="70%" height="600" src="https://www.youtube.com/embed/epJKYQiJP8w?rel=0&amp;controls=0&amp;showinfo=0&amp;enablejsapi=1&amp;version=3" frameborder="0" id="video" allowfullscreen></iframe> -->
	</center>
</div>
{% endblock %}
{% block script %}
<script src="/html/javascript/question.js"></script>
<script>
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '600',
      width: '800',
      videoId: 'epJKYQiJP8w',
      events: {
        'onStateChange': onPlayerStateChange
      }
    });
  }
  var done = false;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      setTimeout(stopVideo, 6000);
      done = true;
    }
  }
  function playVideo() {
    player.playVideo();
  }
  function stopVideo() {
    player.stopVideo();
  }
</script>
{% endblock %}